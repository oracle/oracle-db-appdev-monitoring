"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[289],{8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var r=n(6540);const a={},i=r.createContext(a);function o(e){const t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(i.Provider,{value:t},e.children)}},9279:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"configuration/azure-vault","title":"Azure Vault","description":"Securely load database credentials from Azure Vault.","source":"@site/versioned_docs/version-2.2.0/configuration/azure-vault.md","sourceDirName":"configuration","slug":"/configuration/azure-vault","permalink":"/oracle-db-appdev-monitoring/docs/2.2.0/configuration/azure-vault","draft":false,"unlisted":false,"editUrl":"https://github.com/oracle/oracle-db-appdev-monitoring/tree/main/site/versioned_docs/version-2.2.0/configuration/azure-vault.md","tags":[],"version":"2.2.0","sidebarPosition":7,"frontMatter":{"title":"Azure Vault","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"OCI Vault","permalink":"/oracle-db-appdev-monitoring/docs/2.2.0/configuration/oci-vault"},"next":{"title":"HashiCorp Vault","permalink":"/oracle-db-appdev-monitoring/docs/2.2.0/configuration/hashicorp-vault"}}');var a=n(4848),i=n(8453);const o={title:"Azure Vault",sidebar_position:7},s="Azure Vault",u={},l=[{value:"Authentication",id:"authentication",level:3},{value:"Azure Vault CLI Configuration (without exporter config file)",id:"azure-vault-cli-configuration-without-exporter-config-file",level:3}];function c(e){const t={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"azure-vault",children:"Azure Vault"})}),"\n",(0,a.jsx)(t.p,{children:"Securely load database credentials from Azure Vault."}),"\n",(0,a.jsxs)(t.p,{children:["Each database in the config file may be configured to use Azure Vault. To load the database username and/or password from Azure Vault, set the ",(0,a.jsx)(t.code,{children:"vault.azure"})," property to contain the Azure Vault ID, and secret names for the database username/password:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:"databases:\n  mydb:\n    vault:\n      azure:\n        id: <VAULT ID>\n        usernameSecret: <Secret containing DB username>\n        passwordSecret: <Secret containing DB password>\n"})}),"\n",(0,a.jsx)(t.h3,{id:"authentication",children:"Authentication"}),"\n",(0,a.jsxs)(t.p,{children:["If you are running the exporter outside Azure, we recommend using ",(0,a.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/developer/go/sdk/authentication/authentication-on-premises-apps",children:"application service principal"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["If you are running the exporter inside Azure, we recommend using a ",(0,a.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/developer/go/sdk/authentication/authentication-azure-hosted-apps",children:"managed identity"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"You should set the following additional environment variables to allow the exporter to authenticate to Azure:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"AZURE_TENANT_ID"})," should be set to your tenant ID"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"AZURE_CLIENT_ID"})," should be set to the client ID to authenticate to Azure"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"AZURE_CLIENT_SECRET"})," should be set to the client secret to authenticate to Azure"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"azure-vault-cli-configuration-without-exporter-config-file",children:"Azure Vault CLI Configuration (without exporter config file)"}),"\n",(0,a.jsx)(t.p,{children:"If using the default database with CLI parameters, the exporter will read the database username and password from secrets stored in Azure Key Vault if you set these environment variables:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"AZ_VAULT_ID"})," should be set to the ID of the Azure Key Vault that you wish to use"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"AZ_VAULT_USERNAME_SECRET"})," should be set to the name of the secret in the Azure Key Vault which contains the database username"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"AZ_VAULT_PASSWORD_SECRET"})," should be set to the name of the secret in the Azure Key Vault which contains the database password"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);